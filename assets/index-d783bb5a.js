import{r as d,a as je,R as Te}from"./vendor-b1791c80.js";import{C as Re,E as _e,T as de,A as Ae,a as Ie,S as q,U as Oe,b as ue,X as we,V as ke,c as Le,d as Me,D as Ue,e as De,M as Pe,f as Fe,g as Ge,h as me,i as Be,j as Ye,I as He,L as oe}from"./icons-a86bac4e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var fe={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve=d,$e=Symbol.for("react.element"),Ke=Symbol.for("react.fragment"),ze=Object.prototype.hasOwnProperty,We=Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0};function he(s,t,r){var i,n={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)ze.call(t,i)&&!qe.hasOwnProperty(i)&&(n[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:$e,type:s,key:a,ref:l,props:n,_owner:We.current}}Q.Fragment=Ke;Q.jsx=he;Q.jsxs=he;fe.exports=Q;var e=fe.exports,ee={},ce=je;ee.createRoot=ce.createRoot,ee.hydrateRoot=ce.hydrateRoot;const j={STARTING_MANPOWER:4,MANPOWER_PER_TURN:2,TOTAL_ROUNDS:6,METER_MIN:-5,METER_MAX:5,VICTORY_THRESHOLD:3,DEFEAT_THRESHOLD:-3,SAVE_KEY:"narrative-front-save",SETTINGS_KEY:"narrative-front-settings"},x={IGNORE:"IGNORE",FACT_CHECK:"FACT_CHECK",PRE_BUNK:"PRE_BUNK",COUNTER_NARRATIVE:"COUNTER_NARRATIVE",DISCREDIT_SOURCE:"DISCREDIT_SOURCE"},$={[x.IGNORE]:0,[x.FACT_CHECK]:2,[x.PRE_BUNK]:3,[x.COUNTER_NARRATIVE]:3,[x.DISCREDIT_SOURCE]:2},B=4,z={TRUE:"True",MOSTLY_TRUE:"Mostly True",MISLEADING:"Misleading",FALSE:"False"},K={SUCCESS:"SUCCESS",NEUTRAL:"NEUTRAL",FAILURE:"FAILURE"},H={VOLUME:.4,LOOP:!0,FADE_DURATION:1e3,AUDIO_STATES:{FRACTURING:"fracturing",NEUTRAL:"neutral",UNITY:"unity"}},Xe={TYPEWRITER_SPEED:20,TYPEWRITER_SPEED_FAST:10,ANIMATION_DURATION:300,METER_ANIMATION_DURATION:1e3,KEYS:{ESCAPE:"Escape",ENTER:"Enter",TAB:"Tab",SPACE:" "}},Je={EN:"en",FR:"fr"},X=Je.EN,I={START:"start",BRIEFING:"briefing",MODE_SELECTION:"mode_selection",GAME:"game",OUTCOME:"outcome",END:"end"},J={SCENARIO:"scenario",PROCEDURAL:"procedural"},W={GAME_STATE:"narrative-front-game-state",SETTINGS:"narrative-front-settings",PROGRESS:"narrative-front-progress"},Z={MANPOWER_BONUS_THOROUGH:.15,VARIANCE:.1,CRITICAL_SUCCESS_CHANCE:.05,CRITICAL_FAILURE_CHANCE:.05};function Qe(){const[s,t]=d.useState(0),[r,i]=d.useState(0),[n,a]=d.useState(j.STARTING_MANPOWER),[l,c]=d.useState([]),[m,u]=d.useState([]),o=d.useCallback(()=>{t(0),i(0),a(j.STARTING_MANPOWER),c([]),u([])},[]),f=d.useCallback(()=>{const g=s+1;t(g);const v=n+j.MANPOWER_PER_TURN;return a(v),g},[s,n]),h=d.useCallback(g=>{i(v=>{const w=v+g;return Math.max(j.METER_MIN,Math.min(j.METER_MAX,w))})},[]),b=d.useCallback(g=>{a(v=>Math.max(0,v-g))},[]),E=d.useCallback(g=>{a(v=>v+g)},[]),S=d.useCallback((g,v,w)=>{const L={round:s,scenarioId:g.id,inject:g.inject,responses:v,outcome:w,meterBefore:r,meterAfter:r+w.meterShift,manpowerSpent:w.manpowerCost,timestamp:new Date().toISOString()};return c(Y=>[...Y,L]),L},[s,r]),C=d.useCallback(g=>{u(v=>[...v,g])},[]),T=d.useCallback(g=>m.includes(g),[m]),p=d.useCallback(()=>{try{const g={round:s,meter:r,manpower:n,scenarioHistory:l,preBunksUsed:m,savedAt:new Date().toISOString()};return localStorage.setItem(W.GAME_STATE,JSON.stringify(g)),!0}catch(g){return console.error("Failed to save game:",g),!1}},[s,r,n,l,m]),A=d.useCallback(()=>{try{const g=localStorage.getItem(W.GAME_STATE);if(!g)return!1;const v=JSON.parse(g);return t(v.round),i(v.meter),a(v.manpower),c(v.scenarioHistory||[]),u(v.preBunksUsed||[]),!0}catch(g){return console.error("Failed to load game:",g),!1}},[]),k=d.useCallback(()=>!!localStorage.getItem(W.GAME_STATE),[]),O=d.useCallback(()=>{localStorage.removeItem(W.GAME_STATE)},[]),U=d.useCallback(()=>r>=j.VICTORY_THRESHOLD?"victory":r<=j.DEFEAT_THRESHOLD?"defeat":"neutral",[r]),G=d.useCallback(()=>s>=j.TOTAL_ROUNDS,[s]);return{round:s,meter:r,manpower:n,scenarioHistory:l,preBunksUsed:m,setRound:t,setMeter:i,setManpower:a,setScenarioHistory:c,resetGameState:o,advanceRound:f,updateMeter:h,spendManpower:b,addManpower:E,recordScenario:S,registerPreBunk:C,hasPreBunkFor:T,saveGame:p,loadGame:A,hasSavedGame:k,clearSavedGame:O,getGameOutcome:U,isGameOver:G}}const Ze="modulepreload",et=function(s){return"/narrative-front-alpha-v2/"+s},le={},_=function(t,r,i){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=et(a),a in le)return;le[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!i)for(let o=n.length-1;o>=0;o--){const f=n[o];if(f.href===a&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Ze,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((o,f)=>{u.addEventListener("load",o),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})};function tt(s,t,r){const[i,n]=d.useState(!1),[a,l]=d.useState(null),[c,m]=d.useState(!1),u=d.useRef({fracturing:null,neutral:null,unity:null}),o=d.useRef(new Set),f=d.useCallback(async()=>{if(!(o.current.size>0)){m(!0);try{const[E,S,C]=await Promise.all([_(()=>import("./fracturing-82e36dd2.js"),[]),_(()=>import("./neutral-36a9fde6.js"),[]),_(()=>import("./unity-4b981931.js"),[])]);u.current.fracturing=new Audio(E.default),u.current.neutral=new Audio(S.default),u.current.unity=new Audio(C.default),Object.values(u.current).forEach(T=>{T.loop=H.LOOP,T.volume=H.VOLUME,T.preload="auto"}),o.current.add("fracturing"),o.current.add("neutral"),o.current.add("unity"),m(!1)}catch(E){console.error("Failed to load audio:",E),m(!1)}}},[]),h=d.useCallback(()=>s<=-2?"fracturing":s>=2?"unity":"neutral",[s]),b=d.useCallback(async(E,S)=>{const C=u.current[E],T=u.current[S];if(!C||!T)return;const p=H.FADE_DURATION,A=20,k=p/A;T.volume=0;try{await T.play()}catch(O){console.error("Audio play failed:",O);return}for(let O=0;O<=A;O++){const U=O/A;C&&!C.paused&&(C.volume=H.VOLUME*(1-U)),T&&!T.paused&&(T.volume=H.VOLUME*U),O<A&&await new Promise(G=>setTimeout(G,k))}C&&(C.pause(),C.currentTime=0)},[]);return d.useEffect(()=>{if(!i||r||o.current.size===0){Object.values(u.current).forEach(S=>{S&&!S.paused&&S.pause()}),l(null);return}if(t!==I.GAME&&t!==I.END){Object.values(u.current).forEach(S=>{S&&!S.paused&&S.pause()}),l(null);return}const E=h();if(E!==a){if(a)b(a,E);else{const S=u.current[E];S&&(S.volume=H.VOLUME,S.play().catch(C=>console.error("Audio play failed:",C)))}l(E)}},[s,t,r,i,a,h,b]),d.useEffect(()=>{i&&o.current.size===0&&f()},[i,f]),d.useEffect(()=>()=>{Object.values(u.current).forEach(E=>{E&&(E.pause(),E.src="")})},[]),{userInteracted:i,setUserInteracted:n,isLoading:c,activeTrack:a}}const te=(s,t)=>{const r=s[t];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})};function st(s=X){const[t,r]=d.useState({}),[i,n]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{n(!0);const c=await te(Object.assign({"../data/i18n/en.json":()=>_(()=>import("./en-2189f970.js"),[])}),`../data/i18n/${s}.json`);r(c.default||c)}catch(c){console.error(`Failed to load translations for language: ${s}`,c),r({})}finally{n(!1)}})()},[s]),{t:l=>{const c=l.split(".");let m=t;for(const u of c)if(m&&typeof m=="object"&&u in m)m=m[u];else return console.warn(`Translation key not found: ${l}`),l;return m},loading:i,translations:t}}const pe="/narrative-front-alpha-v2/assets/narrativeFront-7437ce01.svg",P=()=>e.jsx("footer",{style:{position:"fixed",bottom:0,left:0,width:"100vw",backgroundColor:"#000000",padding:"0.4rem 0",zIndex:9999,boxSizing:"border-box"},children:e.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("a",{href:"https://playloadorg.github.io/landing-main-1/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffffff",fontSize:"0.75rem",textDecoration:"none",transition:"opacity 0.3s ease",whiteSpace:"nowrap"},onMouseEnter:s=>s.target.style.opacity="0.7",onMouseLeave:s=>s.target.style.opacity="1",children:"POWERED BY PLAYLOAD.ORG"})})});function at({onStart:s,t}){return e.jsxs("div",{className:"screen-container start-screen",children:[e.jsxs("div",{className:"card start-card",children:[e.jsx("img",{src:pe,alt:"Narrative Front Logo",className:"logo"}),e.jsxs("div",{className:"title-container",children:[e.jsx("h1",{className:"main-title",children:t("start.title")}),e.jsx("p",{className:"brand-text",children:t("start.presenter")}),e.jsx("p",{className:"credit-text",children:t("start.credits")})]}),e.jsx("div",{className:"disclaimer-box",children:e.jsx("p",{className:"disclaimer-text",children:t("start.disclaimer")})}),e.jsx("button",{onClick:s,className:"button primary-button",autoFocus:!0,children:t("start.affirmButton")})]}),e.jsx(P,{})]})}function se({text:s,speed:t=Xe.TYPEWRITER_SPEED,onComplete:r}){const[i,n]=d.useState(""),[a,l]=d.useState(0),[c,m]=d.useState(!1);d.useEffect(()=>{n(""),l(0),m(!1)},[s]),d.useEffect(()=>{if(a<s.length&&!c){const o=setTimeout(()=>{n(f=>f+s[a]),l(f=>f+1)},t);return()=>clearTimeout(o)}else a>=s.length&&!c&&(m(!0),r&&r())},[a,s,t,c,r]);const u=d.useCallback(()=>{c||(n(s),l(s.length),m(!0),r&&r())},[c,s,r]);return e.jsxs("span",{onClick:u,style:{cursor:c?"default":"pointer"},title:c?"":"Click to skip",children:[i,!c&&e.jsx("span",{className:"typewriter-cursor",children:"â–Œ"})]})}function nt({onStart:s,t}){const[r,i]=d.useState(!1),[n,a]=d.useState(!1);return d.useEffect(()=>{var l;n&&((l=document.getElementById("begin-button"))==null||l.focus())},[n]),e.jsxs("div",{className:"screen-container briefing-screen",children:[e.jsxs("div",{className:"card briefing-card",children:[e.jsx("div",{className:"briefing-quote",children:e.jsx(se,{text:t("briefing.quote"),speed:60,onComplete:()=>i(!0)})}),r&&e.jsx("div",{className:"briefing-attribution",children:t("briefing.attribution")}),r&&e.jsx("div",{className:"briefing-text",children:e.jsx(se,{text:t("briefing.text"),speed:10,onComplete:()=>a(!0)})}),n&&e.jsx("div",{className:"briefing-action",children:e.jsx("button",{id:"begin-button",onClick:s,className:"button primary-button",children:t("briefing.beginButton")})})]}),e.jsx(P,{})]})}const rt=({value:s,t})=>{const r=j.METER_MAX-j.METER_MIN,n=(s-j.METER_MIN)/r*100;return e.jsxs("div",{className:"tug-of-war-container",children:[e.jsxs("div",{className:"tug-of-war-bar",children:[e.jsx("div",{className:"bar-color-fill",style:{clipPath:`inset(0 ${100-n}% 0 0)`}}),e.jsx("div",{className:"bar-marker",style:{left:`${n}%`},children:e.jsx("div",{className:"bar-marker-orb"})})]}),e.jsxs("div",{className:"bar-labels",children:[e.jsx("span",{className:"label-fragmentation",children:t("meter.fragmentationLabel")}),e.jsx("span",{className:"label-neutral",children:t("meter.neutralLabel")}),e.jsx("span",{className:"label-unity",children:t("meter.unityLabel")})]}),e.jsxs("div",{className:"meter-value",children:[t("meter.label"),": ",s>0?"+":"",s]})]})},ge=({value:s,meterType:t="tugofwar",t:r})=>e.jsx(rt,{value:s,t:r});function it({intelligence:s,t}){const r=c=>{switch(c){case z.TRUE:return"#4ade80";case z.MOSTLY_TRUE:return"#facc15";case z.MISLEADING:return"#fb923c";case z.FALSE:return"#ef4444";default:return"#6b7280"}},i=(c,m=10)=>{const u=c/m*100;return u<=33?"#4ade80":u<=66?"#facc15":"#ef4444"},a=(()=>{const c=(s.damagePotential+s.botAmplification/10)/2,m=s.hoursActive<=2?1.3:1,u=c*m;return u>=7?{label:"ðŸ”´ CRITICAL THREAT",color:"#ef4444"}:u>=4?{label:"ðŸŸ¡ HIGH THREAT",color:"#facc15"}:{label:"ðŸŸ¢ MODERATE THREAT",color:"#4ade80"}})(),l=[{icon:e.jsx(Re,{size:14}),label:t("intelligence.hoursActiveLabel"),value:`${s.hoursActive}${t("intelligence.hoursActiveUnit")}`,color:s.hoursActive<=2?"#ef4444":s.hoursActive<=6?"#facc15":"#4ade80"},{icon:e.jsx(_e,{size:14}),label:t("intelligence.veracityLabel"),value:t(`intelligence.veracity${s.veracity.replace(/\s/g,"")}`),color:r(s.veracity)},{icon:e.jsx(de,{size:14}),label:t("intelligence.damagePotentialLabel"),value:`${s.damagePotential}${t("intelligence.damagePotentialScale")}`,barValue:s.damagePotential,barMax:10,color:i(s.damagePotential,10)},{icon:e.jsx(Ae,{size:14}),label:t("intelligence.emotionalResonanceLabel"),value:`${s.emotionalResonance}${t("intelligence.emotionalResonanceScale")}`,barValue:s.emotionalResonance,barMax:10,color:i(s.emotionalResonance,10)},{icon:e.jsx(Ie,{size:14}),label:t("intelligence.botAmplificationLabel"),value:`${s.botAmplification}${t("intelligence.botAmplificationUnit")}`,barValue:s.botAmplification,barMax:100,color:i(s.botAmplification,100)}];return e.jsxs("div",{className:"intel-compact",children:[e.jsx("h4",{className:"intel-compact-title",children:t("intelligence.title")}),e.jsx("div",{className:"threat-badge-compact",style:{backgroundColor:`${a.color}20`,borderColor:a.color,color:a.color},children:a.label}),l.map((c,m)=>e.jsxs("div",{className:"intel-metric-compact",children:[e.jsxs("div",{className:"metric-header-compact",children:[e.jsx("span",{className:"metric-icon-compact",style:{color:c.color},children:c.icon}),e.jsxs("span",{className:"metric-label-compact",children:[c.label,":"]}),e.jsx("span",{className:"metric-value-compact",style:{color:c.color},children:c.value})]}),c.barValue!==void 0&&e.jsx("div",{className:"metric-bar-compact",children:e.jsx("div",{className:"metric-bar-fill-compact",style:{width:`${c.barValue/c.barMax*100}%`,backgroundColor:c.color}})})]},m))]})}function Ee({messages:s,t}){const r=d.useRef(null),[i,n]=d.useState([]);return d.useEffect(()=>{if(s.length===0){n([]);return}n([]),s.forEach((a,l)=>{setTimeout(()=>{n(c=>[...c,a])},l*100)})},[s]),d.useEffect(()=>{var a;(a=r.current)==null||a.scrollIntoView({behavior:"smooth"})},[i]),s.length===0?e.jsx("div",{className:"filter-chat-container",children:e.jsxs("div",{className:"filter-chat-empty",children:[e.jsx(q,{size:32,className:"filter-icon-large"}),e.jsx("p",{children:t("game.filterChatPlaceholder")})]})}):e.jsx("div",{className:"filter-chat-container",children:e.jsxs("div",{className:"filter-chat-messages",children:[i.map((a,l)=>e.jsxs("div",{className:`chat-message ${a.sender==="filter"?"filter-message":"system-message"}`,children:[e.jsx("div",{className:"message-avatar",children:a.sender==="filter"?e.jsx(q,{size:20}):e.jsx(Oe,{size:20})}),e.jsxs("div",{className:"message-content",children:[e.jsx("div",{className:"message-sender",children:a.sender==="filter"?"Filter":"System"}),e.jsx("div",{className:"message-text",children:l===i.length-1?e.jsx(se,{text:a.text}):a.text})]})]},l)),e.jsx("div",{ref:r})]})})}function ve(s){return{sender:"filter",text:s,timestamp:Date.now()}}function ot(s){return{sender:"system",text:s,timestamp:Date.now()}}function ct({selectedResponses:s,availableManpower:t,onSelectResponse:r,onRemoveResponse:i,t:n}){const a=o=>s.find(f=>f.type===o),l=o=>s.reduce((h,b)=>h+b.manpowerCost,0)+o<=t,c=[{type:x.IGNORE,title:n("responses.ignore.title"),description:n("responses.ignore.description"),cost:$[x.IGNORE],riskWarning:n("responses.ignore.riskWarning")},{type:x.FACT_CHECK,title:n("responses.factCheckBasic.title"),description:n("responses.factCheckBasic.description"),cost:$[x.FACT_CHECK],riskWarning:null,hasUpgrade:!0},{type:x.PRE_BUNK,title:n("responses.preBunk.title"),description:n("responses.preBunk.description"),cost:$[x.PRE_BUNK],riskWarning:n("responses.preBunk.riskWarning")},{type:x.COUNTER_NARRATIVE,title:n("responses.counterNarrative.title"),description:n("responses.counterNarrative.description"),cost:$[x.COUNTER_NARRATIVE],riskWarning:null},{type:x.DISCREDIT_SOURCE,title:n("responses.discreditSource.title"),description:n("responses.discreditSource.description"),cost:$[x.DISCREDIT_SOURCE],riskWarning:n("responses.discreditSource.riskWarning")}],m=o=>{a(o.type)?i(o.type):l(o.cost)&&r({type:o.type,manpowerCost:o.cost})},u=o=>{l(B)&&(i(o.type),r({type:o.type,manpowerCost:B}))};return e.jsx("div",{className:"response-panel",children:e.jsx("div",{className:"response-grid",children:c.map(o=>{const f=a(o.type),h=!!f,b=(f==null?void 0:f.manpowerCost)===B,E=l(o.cost);return e.jsxs("div",{className:"response-option-wrapper",children:[e.jsxs("button",{className:`response-option ${h?"selected":""} ${!E&&!h?"disabled":""}`,onClick:()=>m(o),disabled:!E&&!h,children:[e.jsxs("div",{className:"response-header",children:[e.jsx("div",{className:"response-title",children:o.title}),h&&e.jsx(ue,{size:18,className:"response-check-icon"})]}),e.jsx("div",{className:"response-description",children:o.description}),e.jsxs("div",{className:"response-footer",children:[e.jsxs("span",{className:"response-cost",children:[o.cost," MP"]}),o.riskWarning&&e.jsx("span",{className:"response-risk",children:"âš ï¸"})]}),o.riskWarning&&e.jsx("div",{className:"response-warning",children:o.riskWarning})]}),o.hasUpgrade&&h&&!b&&e.jsxs("button",{className:`response-upgrade ${l(B)?"":"disabled"}`,onClick:()=>u(o),disabled:!l(B),children:[e.jsxs("span",{children:["â¬†ï¸ ",n("responses.factCheckThorough.title")]}),e.jsxs("span",{className:"upgrade-cost",children:[B," MP"]})]}),o.hasUpgrade&&h&&b&&e.jsxs("div",{className:"response-thorough-badge",children:["âœ“ ",n("responses.factCheckThorough.title")]})]},o.type)})})})}function lt({isOpen:s,onClose:t,isMuted:r,setIsMuted:i,onSaveGame:n,onLoadGame:a,hasSavedGame:l,t:c}){if(!s)return null;const m=()=>{n()&&console.log("Game saved successfully")},u=()=>{a()&&(console.log("Game loaded successfully"),t())};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"settings-overlay",onClick:t}),e.jsxs("div",{className:"settings-menu slide-in",children:[e.jsx("button",{className:"settings-close",onClick:t,"aria-label":c("accessibility.closeMenu"),children:e.jsx(we,{size:24})}),e.jsx("h3",{className:"settings-title",children:c("settings.title")}),e.jsxs("button",{className:"button settings-button",onClick:()=>i(!r),children:[r?e.jsx(ke,{size:20}):e.jsx(Le,{size:20}),e.jsx("span",{children:c(r?"settings.unmuteButton":"settings.muteButton")})]}),e.jsx("div",{className:"settings-divider"}),e.jsxs("button",{className:"button settings-button",onClick:m,children:[e.jsx(Me,{size:20}),e.jsx("span",{children:c("settings.saveGameButton")})]}),e.jsxs("button",{className:"button settings-button",onClick:u,disabled:!l,children:[e.jsx(Ue,{size:20}),e.jsx("span",{children:c("settings.loadGameButton")})]}),!l&&e.jsx("p",{className:"settings-note",children:c("settings.noSavedGame")||"No saved game available"})]})]})}function dt({outcome:s,scenario:t,onContinue:r,t:i}){const[n,a]=d.useState([]),[l,c]=d.useState(!1);return d.useEffect(()=>{var o;if(!s||!t)return;const m=[];s.outcomes&&s.outcomes.length>0&&s.outcomes.forEach(f=>{m.push(ot(f.text))}),(o=t.filter)!=null&&o.outro&&m.push(ve(t.filter.outro)),a(m);const u=setTimeout(()=>{c(!0)},1e3);return()=>clearTimeout(u)},[s,t]),s?e.jsxs("div",{className:"screen-container outcome-screen",children:[e.jsxs("div",{className:"card outcome-card",children:[e.jsx("h2",{className:"outcome-title",children:i("outcome.title")}),e.jsxs("div",{className:"outcome-summary",children:[e.jsxs("div",{className:"outcome-stat",children:[s.meterShift>0?e.jsx(de,{className:"outcome-icon",style:{color:"#4ade80"},size:32}):s.meterShift<0?e.jsx(De,{className:"outcome-icon",style:{color:"#f87171"},size:32}):e.jsx(Pe,{className:"outcome-icon",style:{color:"#9ca3af"},size:32}),e.jsxs("div",{className:"outcome-stat-details",children:[e.jsx("span",{className:"outcome-stat-label",children:i("outcome.meterImpact")}),e.jsxs("span",{className:"outcome-stat-value",style:{color:s.meterShift>0?"#4ade80":s.meterShift<0?"#f87171":"#9ca3af"},children:[s.meterShift>0?"+":"",s.meterShift]})]})]}),e.jsxs("div",{className:"outcome-stat",children:[e.jsx(Fe,{className:"outcome-icon",style:{color:"#22d3ee"},size:32}),e.jsxs("div",{className:"outcome-stat-details",children:[e.jsx("span",{className:"outcome-stat-label",children:i("outcome.manpowerSpent")}),e.jsx("span",{className:"outcome-stat-value",style:{color:"#22d3ee"},children:s.manpowerCost})]})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem",marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",color:"#22d3ee",marginBottom:"1rem",textAlign:"center"},children:i("outcome.analysis")}),e.jsx(Ee,{messages:n,t:i})]}),l&&e.jsx("button",{onClick:r,className:"button primary-button full-width",autoFocus:!0,children:i("outcome.continueButton")})]}),e.jsx(P,{})]}):e.jsxs("div",{className:"screen-container outcome-screen",children:[e.jsx("div",{className:"card",children:e.jsx("p",{children:i("ui.loading")})}),e.jsx(P,{})]})}function ut(){const[s,t]=d.useState(null),[r,i]=d.useState(!1),n=d.useRef({}),a=d.useCallback(async(c,m=X)=>{const u=`${c}-${m}`;if(n.current[u]){t(n.current[u]);return}try{i(!0);const o=String(c+1).padStart(2,"0"),f=await te(Object.assign({"../data/scenarios/scenario-01-en.json":()=>_(()=>import("./scenario-01-en-247b2d75.js"),[]),"../data/scenarios/scenario-02-en.json":()=>_(()=>import("./scenario-02-en-6e92b6f4.js"),[]),"../data/scenarios/scenario-03-en.json":()=>_(()=>import("./scenario-03-en-1efa7df5.js"),[]),"../data/scenarios/scenario-04-en.json":()=>_(()=>import("./scenario-04-en-d7c28cd1.js"),[]),"../data/scenarios/scenario-05-en.json":()=>_(()=>import("./scenario-05-en-efa53591.js"),[]),"../data/scenarios/scenario-06-en.json":()=>_(()=>import("./scenario-06-en-eb0da137.js"),[])}),`../data/scenarios/scenario-${o}-${m}.json`),h=f.default||f;n.current[u]=h,t(h)}catch(o){console.error(`Failed to load scenario ${c} in language ${m}:`,o),t(null)}finally{i(!1)}},[]),l=d.useCallback(async(c,m=X)=>{const u=c+1,o=`${u}-${m}`;if(!n.current[o])try{const f=String(u+1).padStart(2,"0"),h=await te(Object.assign({"../data/scenarios/scenario-01-en.json":()=>_(()=>import("./scenario-01-en-247b2d75.js"),[]),"../data/scenarios/scenario-02-en.json":()=>_(()=>import("./scenario-02-en-6e92b6f4.js"),[]),"../data/scenarios/scenario-03-en.json":()=>_(()=>import("./scenario-03-en-1efa7df5.js"),[]),"../data/scenarios/scenario-04-en.json":()=>_(()=>import("./scenario-04-en-d7c28cd1.js"),[]),"../data/scenarios/scenario-05-en.json":()=>_(()=>import("./scenario-05-en-efa53591.js"),[]),"../data/scenarios/scenario-06-en.json":()=>_(()=>import("./scenario-06-en-eb0da137.js"),[])}),`../data/scenarios/scenario-${f}-${m}.json`),b=h.default||h;n.current[o]=b}catch{console.debug(`Could not preload scenario ${u}`)}},[]);return{currentScenario:s,loading:r,loadScenario:a,preloadNextScenario:l}}const mt={version:"1.0.0",description:"Generic outcome text templates by response type and result",lastUpdated:"2025-01-17"},ft={SUCCESS:[{shift:1,text:"Your rapid and clear fact-check was picked up by credible media, effectively neutralizing the claim for a majority of the public."},{shift:1,text:"Technical analysis exposed the false claim. Major outlets reported your debunking, significantly limiting the narrative's spread."},{shift:2,text:"Your comprehensive fact-check with verifiable evidence went viral positively, overwhelming the adversary's narrative."}],NEUTRAL:[{shift:0,text:"The fact-check circulated among journalists and experts but failed to penetrate the social media bubbles where the lie was spreading."},{shift:0,text:"Your correction reached informed audiences but didn't break through to those already convinced by the narrative."},{shift:0,text:"While technically accurate, your fact-check lacked the emotional resonance needed to counter the adversary's compelling story."}],FAILURE:[{shift:-1,text:"Your response was too slow or too technical. The adversary spun your correction as 'official propaganda,' further muddying the waters."},{shift:-1,text:"By the time your fact-check appeared, the narrative had solidified. Your denial was treated as confirmation by suspicious audiences."},{shift:-2,text:"Your fact-check was too aggressive and defensive in tone, making you appear threatened. The Streisand effect amplified the original claim."}]},ht={SUCCESS:[{shift:3,text:"Your prior warnings about these specific manipulation tactics paid off. The adversary's attempt was widely recognized as hostile propaganda and dismissed, significantly boosting public resilience."},{shift:3,text:"Because you pre-bunked this type of narrative, audiences were psychologically inoculated. The claim failed to gain traction and was mocked as predictable propaganda."},{shift:2,text:"Your pre-emptive education created skepticism among key audiences. While the narrative spread in fringe circles, mainstream rejection was swift."}],NEUTRAL:[{shift:0,text:"Your pre-bunking had some effect among attentive audiences, but the adversary's narrative still found purchase in less-informed communities."},{shift:0,text:"The pre-bunk helped somewhat, but the emotional power of the adversary's claim overcame rational preparation for many people."}],FAILURE:[{shift:-1,text:"Despite your warnings, the hostile narrative was compelling enough to take root. Your pre-bunking had minimal effect, and valuable resources were expended."},{shift:-1,text:"Your pre-bunking was too vague or poorly targeted. When the actual narrative hit, audiences didn't make the connection."}]},pt={SUCCESS:[{shift:1,text:"A risky gamble that paid off. The claim was too absurd to gain traction on its own and quickly faded into obscurity without your intervention."},{shift:1,text:"By not engaging, you avoided amplifying a fringe narrative. It burned out naturally among small circles."}],NEUTRAL:[{shift:0,text:"The hostile narrative didn't explode, but it continues to simmer in fringe communities, creating a low level of background noise and doubt."},{shift:0,text:"Your silence neither helped nor harmed significantly. The narrative exists but hasn't reached critical mass."}],FAILURE:[{shift:-3,text:"Your silence was interpreted as guilt. The narrative went viral, treated as confirmed truth by adversaries, and caused significant damage to public trust."},{shift:-2,text:"Ignoring allowed the rumor to spread unchecked. Public doubt increased as no authoritative voice countered the claims."},{shift:-2,text:"Without your response, adversary media amplified the narrative as 'the story NATO doesn't want you to know.' Silence became complicity."}]},gt={SUCCESS:[{shift:2,text:"Your powerful, positive stories completely shifted the media focus. The adversary's narrative was drowned out by a wave of compelling, authentic content."},{shift:2,text:"Your counter-narrative with genuine human stories and verifiable positive impact went viral, overwhelming the adversary's messaging."},{shift:1,text:"The positive narrative gained significant traction, providing audiences an alternative story to believe in."}],NEUTRAL:[{shift:0,text:"Your positive messaging was well-received but didn't directly address the hostile claim, which continued to circulate and cause damage in specific circles."},{shift:0,text:"The counter-narrative competed with the adversary's story but neither dominated. Public opinion remained divided."},{shift:0,text:"While your positive stories resonated with supporters, they didn't reach the audiences most affected by the adversary's claims."}],FAILURE:[{shift:-1,text:"Your counter-narrative was perceived as a clumsy attempt to 'change the subject' and was called out by critics, making you appear evasive."},{shift:-1,text:"The timing and tone of your positive messaging felt tone-deaf given the serious allegations. It backfired by seeming dismissive of legitimate concerns."},{shift:-2,text:"Your counter-narrative was too obviously crafted and inauthentic. Audiences saw through it, damaging credibility further."}]},Et={SUCCESS:[{shift:1,text:"You successfully exposed the source as a known disinformation agent with clear ties to hostile actors. The claim was discredited among informed audiences."},{shift:1,text:"Your investigation revealed the source's funding and affiliations. Independent media picked up your exposÃ©, undermining the narrative's credibility."},{shift:2,text:"Comprehensive evidence of the source's malicious intent and fabrication history went viral, completely destroying their credibility."}],NEUTRAL:[{shift:0,text:"While you proved the source was unreliable, the message had already detached from the messenger and was spreading organically among those who wanted to believe it."},{shift:0,text:"Your attack on the source had mixed results. Skeptics appreciated the evidence, but true believers dismissed it as an ad hominem attack."}],FAILURE:[{shift:-2,text:"Your attack on the source backfired spectacularly. It was framed as an attempt to silence dissent, creating a martyr and making you look defensive and aggressive. The situation is now significantly worse."},{shift:-2,text:"Attacking the messenger was seen as avoiding the message. Critics accused you of deflection, and the narrative gained legitimacy through your perceived fear."},{shift:-1,text:"Your discrediting attempt was too aggressive. It played into the 'powerful NATO silencing critics' narrative the adversary wanted."}]},vt={SYNERGY_PREBUNK_FACTCHECK:{shift:1,bonus:"Pre-bunking prepared audiences to trust your fact-check. The combination was highly effective."},SYNERGY_COUNTER_FACTCHECK:{shift:1,bonus:"Debunking the lie while providing a positive alternative created a powerful one-two punch."},SYNERGY_FACTCHECK_DISCREDIT:{shift:0,bonus:"Attacking both the message and the messenger felt thorough but perhaps overly aggressive to some audiences."},INEFFICIENCY_MULTIPLE_FACTCHECKS:{shift:-1,penalty:"Using multiple fact-checking efforts on the same narrative was redundant and wasted resources."},INEFFICIENCY_IGNORE_THEN_RESPOND:{shift:-1,penalty:"Inconsistent strategy. Ignoring then responding appeared indecisive and reactive."}},xt={CRITICAL_SUCCESS:{shift:3,text:"CRITICAL SUCCESS: Your response was perfectly timed and executed. The adversary's operation completely collapsed, and public trust actually increased."},CRITICAL_FAILURE:{shift:-3,text:"CRITICAL FAILURE: Your response catastrophically backfired. The adversary used your actions as proof of their narrative, causing massive damage."}},Nt={meta:mt,FACT_CHECK:ft,PRE_BUNK:ht,IGNORE:pt,COUNTER_NARRATIVE:gt,DISCREDIT_SOURCE:Et,COMBINED:vt,CRITICAL_OUTCOMES:xt};class St{constructor(){this.outcomes=Nt}calculateOutcome(t,r,i){const{preBunksUsed:n=[]}=i,a=this.calculateManpowerCost(r),l=r.map(o=>this.processResponse(o,t,n));let c=l.reduce((o,f)=>o+f.shift,0);const m=l.map(o=>o.narrative),u=this.checkSynergies(r,t);return u&&(m.push(u.narrative),c+=u.shift),{meterShift:Math.max(-5,Math.min(5,c)),manpowerCost:a,outcomes:m,responses:r.map(o=>o.type),success:c>0}}calculateManpowerCost(t){return t.reduce((r,i)=>r+(i.manpowerCost||0),0)}processResponse(t,r,i){const n=t.type,a=r.probabilities[n];if(!a)return console.error(`No probabilities found for response type: ${n}`),{shift:0,narrative:{text:"Unknown response type."}};const l=i.includes(r.metadata.theme);let c=a.success,m=a.neutral,u=a.failure;n===x.FACT_CHECK&&t.manpowerCost===B&&(c+=a.thorough_bonus||0,u-=a.thorough_bonus||0),l&&n===x.PRE_BUNK&&(c=Math.min(1,c+.2),u=Math.max(0,u-.2));const o=(Math.random()-.5)*Z.VARIANCE*2;c+=o,u-=o;const f=c+m+u;c/=f,m/=f,u/=f;const h=Math.random();let b;h<c?b=K.SUCCESS:h<c+m?b=K.NEUTRAL:b=K.FAILURE;const E=Math.random();if(E<Z.CRITICAL_SUCCESS_CHANCE&&b===K.SUCCESS)return this.getCriticalOutcome(!0);if(E<Z.CRITICAL_FAILURE_CHANCE&&b===K.FAILURE)return this.getCriticalOutcome(!1);const S=this.selectNarrative(n,b);return{shift:S.shift,narrative:{text:S.text}}}selectNarrative(t,r){var a;const i=(a=this.outcomes[t])==null?void 0:a[r];return!i||i.length===0?(console.warn(`No narrative found for ${t} - ${r}`),{shift:0,text:"The situation evolves..."}):i[Math.floor(Math.random()*i.length)]}getCriticalOutcome(t){const r=t?this.outcomes.CRITICAL_OUTCOMES.CRITICAL_SUCCESS:this.outcomes.CRITICAL_OUTCOMES.CRITICAL_FAILURE;return{shift:r.shift,narrative:{text:r.text}}}checkSynergies(t,r){if(t.length<2)return null;const i=t.map(a=>a.type);return i.includes(x.PRE_BUNK)&&i.includes(x.FACT_CHECK)?{shift:1,narrative:{text:this.outcomes.COMBINED.SYNERGY_PREBUNK_FACTCHECK.bonus}}:i.includes(x.COUNTER_NARRATIVE)&&i.includes(x.FACT_CHECK)?{shift:1,narrative:{text:this.outcomes.COMBINED.SYNERGY_COUNTER_FACTCHECK.bonus}}:i.includes(x.FACT_CHECK)&&i.includes(x.DISCREDIT_SOURCE)?{shift:0,narrative:{text:this.outcomes.COMBINED.SYNERGY_FACTCHECK_DISCREDIT.bonus}}:i.filter(a=>a===x.FACT_CHECK).length>1?{shift:-1,narrative:{text:this.outcomes.COMBINED.INEFFICIENCY_MULTIPLE_FACTCHECKS.penalty}}:null}}function bt({round:s,meter:t,manpower:r,preBunksUsed:i,gameMode:n,scenarioId:a,language:l,isMuted:c,setIsMuted:m,onMeterChange:u,onManpowerChange:o,onAdvanceRound:f,onRegisterPreBunk:h,onRecordScenario:b,onSaveGame:E,onLoadGame:S,onGameEnd:C,hasSavedGame:T,t:p}){const[A,k]=d.useState("scenario"),[O,U]=d.useState(!1),[G,g]=d.useState(!1),[v,w]=d.useState([]),[L,Y]=d.useState(null),[N,M]=d.useState([]),{currentScenario:y,loading:xe,loadScenario:ae,preloadNextScenario:ne}=ut(),Ne=d.useRef(new St);d.useEffect(()=>{ae(s,l)},[s,l,ae]),d.useEffect(()=>{var R;(R=y==null?void 0:y.filter)!=null&&R.intro&&M([ve(y.filter.intro)])},[y]),d.useEffect(()=>{y&&s<j.TOTAL_ROUNDS-1&&ne(s,l)},[y,s,l,ne]);const Se=R=>{const F=v.find(D=>D.type===R.type);w(F?D=>D.map(V=>V.type===R.type?R:V):D=>[...D,R])},be=R=>{w(F=>F.filter(D=>D.type!==R))},Ce=()=>{const R=v.length>0?v:[{type:x.IGNORE,manpowerCost:0}],F=Ne.current.calculateOutcome(y,R,{meter:t,manpower:r,preBunksUsed:i});R.forEach(D=>{var V;D.type===x.PRE_BUNK&&((V=y.metadata)!=null&&V.theme)&&h(y.metadata.theme)}),b(y,R,F),Y(F),g(!0)},ye=()=>{if(L){if(u(L.meterShift),o(-L.manpowerCost),s>=j.TOTAL_ROUNDS-1){C();return}f(),g(!1),Y(null),w([]),k("scenario")}},re=()=>v.reduce((R,F)=>R+F.manpowerCost,0),ie=()=>re()<=r;return G&&L?e.jsx(dt,{outcome:L,scenario:y,onContinue:ye,t:p}):xe||!y?e.jsxs("div",{className:"screen-container game-screen",children:[e.jsx("div",{className:"card",children:e.jsx("p",{children:p("ui.loading")})}),e.jsx(P,{})]}):e.jsxs("div",{className:"screen-container game-screen",children:[e.jsx(lt,{isOpen:O,onClose:()=>U(!1),isMuted:c,setIsMuted:m,onSaveGame:E,onLoadGame:S,hasSavedGame:T,t:p}),e.jsxs("div",{className:`card game-card ${O?"blurred":""}`,children:[e.jsxs("header",{className:"game-header",children:[e.jsx("button",{className:"settings-hamburger",onClick:()=>U(!0),"aria-label":p("accessibility.menuButton"),children:e.jsx(Ge,{size:24})}),e.jsxs("div",{className:"header-title-container",children:[e.jsx(q,{className:"header-icon"}),e.jsx("span",{className:"header-title",children:p("game.appTitle")})]}),e.jsx("img",{src:pe,alt:"Narrative Front Logo",className:"header-logo"})]}),e.jsx("div",{className:"header-subtitle",children:p("game.appSubtitle")}),e.jsxs("div",{className:"resource-display",children:[e.jsxs("div",{className:"resource-item",children:[e.jsxs("span",{className:"resource-label",children:[p("game.manpowerLabel"),":"]}),e.jsx("span",{className:"resource-value",children:r})]}),e.jsxs("div",{className:"resource-item",children:[e.jsxs("span",{className:"resource-label",children:[p("game.roundLabel"),":"]}),e.jsxs("span",{className:"resource-value",children:[s+1," ",p("game.ofLabel")," ",j.TOTAL_ROUNDS]})]})]}),e.jsx(ge,{value:t,meterType:"tugofwar",t:p}),e.jsxs("div",{className:"tab-navigation",children:[e.jsx("button",{className:`tab-button ${A==="scenario"?"active":""}`,onClick:()=>k("scenario"),children:p("game.tabScenario")}),e.jsx("button",{className:`tab-button ${A==="comms"?"active":""}`,onClick:()=>k("comms"),children:p("game.tabComms")}),e.jsx("button",{className:`tab-button ${A==="decision"?"active":""}`,onClick:()=>k("decision"),children:p("game.tabDecision")})]}),e.jsxs("div",{className:"tab-content",children:[A==="scenario"&&e.jsxs("div",{className:"scenario-tab",children:[e.jsxs("div",{className:"inject-section",children:[e.jsxs("div",{className:"inject-header",children:[e.jsx(me,{className:"inject-icon"}),e.jsx("h3",{className:"inject-title",children:p("game.adversaryInject")})]}),e.jsx("p",{className:"inject-text",children:y.inject})]}),e.jsx(it,{intelligence:y.intelligence,t:p})]}),A==="comms"&&e.jsxs("div",{className:"comms-tab",children:[e.jsx("h3",{className:"comms-tab-title",children:p("game.commsTitle")}),e.jsx(Ee,{messages:N,t:p})]}),A==="decision"&&e.jsxs("div",{className:"decision-tab",children:[e.jsx("h3",{className:"decision-tab-title",children:p("game.decisionTitle")}),e.jsx("div",{className:"manpower-summary",children:e.jsxs("span",{children:[p("game.manpowerAllocated"),": ",re()," / ",r]})}),e.jsx(ct,{selectedResponses:v,availableManpower:r,onSelectResponse:Se,onRemoveResponse:be,t:p}),e.jsx("button",{onClick:Ce,disabled:!ie(),className:"button primary-button full-width confirm-response-button",children:v.length===0?p("responses.noResponseSelected"):p("game.confirmButton")}),!ie()&&e.jsx("p",{className:"error-text",children:p("responses.insufficientManpower")})]})]}),e.jsxs("footer",{className:"game-footer",children:[p("game.roundLabel")," ",s+1," ",p("game.ofLabel")," ",j.TOTAL_ROUNDS]})]}),e.jsx(P,{})]})}function Ct({meter:s,manpower:t,scenarioHistory:r,onPlayAgain:i,t:n}){const l=(()=>s>=j.VICTORY_THRESHOLD?{type:"victory",title:n("end.victoryTitle"),message:n("end.victoryMessage"),icon:e.jsx(ue,{className:"end-icon"}),colorClass:"text-green"}:s<=j.DEFEAT_THRESHOLD?{type:"defeat",title:n("end.defeatTitle"),message:n("end.defeatMessage"),icon:e.jsx(Be,{className:"end-icon"}),colorClass:"text-red"}:{type:"neutral",title:n("end.neutralTitle"),message:n("end.neutralMessage"),icon:e.jsx(me,{className:"end-icon"}),colorClass:"text-yellow"})();return e.jsxs("div",{className:"screen-container end-screen",children:[e.jsxs("div",{className:"card end-card",children:[e.jsx("div",{className:`end-icon-container ${l.colorClass}`,children:l.icon}),e.jsx("h2",{className:`end-title ${l.colorClass}`,children:l.title}),e.jsx(ge,{value:s,meterType:"tugofwar",t:n}),e.jsx("p",{className:"end-message",children:l.message}),e.jsxs("div",{className:"end-stats",children:[e.jsxs("div",{className:"end-stat-row",children:[e.jsxs("span",{className:"end-stat-label",children:[n("end.finalMeterLabel"),":"]}),e.jsxs("span",{className:`end-stat-value ${l.colorClass}`,children:[s>0?"+":"",s]})]}),e.jsxs("div",{className:"end-stat-row",children:[e.jsxs("span",{className:"end-stat-label",children:[n("end.finalManpowerLabel"),":"]}),e.jsx("span",{className:"end-stat-value",children:t})]}),e.jsxs("div",{className:"end-stat-row",children:[e.jsxs("span",{className:"end-stat-label",children:[n("end.scenariosCompletedLabel"),":"]}),e.jsx("span",{className:"end-stat-value",children:r.length})]})]}),e.jsx("div",{className:"end-actions",children:e.jsx("button",{onClick:i,className:"button primary-button full-width",autoFocus:!0,children:n("end.playAgainButton")})})]}),e.jsx(P,{})]})}const yt="1.0.0",jt=[{id:"nato-eastern-europe",name:"NATO Eastern Europe Peacekeeping",classification:"UNCLASSIFIED",mode:"scenario",rounds:6,description:"Hand-crafted scenarios based on realistic disinformation tactics in peacekeeping operations. Includes tactical advisor guidance and learning-focused probability tables.",features:["filter_guidance","fixed_responses","learning_focused","probability_tuned"],difficulty:"intermediate",estimatedTime:"15-20 minutes",enabled:!0},{id:"procedural-infinite",name:"Infinite Mode (Coming Soon)",classification:"UNCLASSIFIED",mode:"procedural",rounds:999,description:"Endless procedurally generated scenarios with deck-building mechanics. Build your response arsenal over time and test your strategic communications skills against infinite variations.",features:["deck_building","procedural_generation","replayability","progressive_unlocks"],difficulty:"advanced",estimatedTime:"Endless",enabled:!1}],Tt="nato-eastern-europe",Rt={version:yt,scenarios:jt,defaultScenario:Tt};function _t(){const[s,t]=d.useState(null),[r,i]=d.useState(!0),[n,a]=d.useState(null);return d.useEffect(()=>{try{t(Rt),i(!1)}catch(o){console.error("Failed to load manifest:",o),a(o),i(!1)}},[]),{manifest:s,loading:r,error:n,getEnabledScenarios:()=>s?s.scenarios.filter(o=>o.enabled):[],getScenarioById:o=>s?s.scenarios.find(f=>f.id===o):null,getDefaultScenario:()=>s?s.scenarios.find(o=>o.id===s.defaultScenario):null,isModeAvailable:o=>s?s.scenarios.some(f=>f.mode===o&&f.enabled):!1}}function At({onSelectMode:s,t}){const{getEnabledScenarios:r,loading:i}=_t();if(i)return e.jsxs("div",{className:"screen-container mode-selection-screen",children:[e.jsx("div",{className:"card",children:e.jsx("p",{children:t("ui.loading")})}),e.jsx(P,{})]});const n=[{id:"nato-eastern-europe",mode:J.SCENARIO,icon:e.jsx(Ye,{size:48}),title:t("modeSelection.natoEE.title"),subtitle:t("modeSelection.natoEE.subtitle"),classification:t("modeSelection.classification"),description:t("modeSelection.natoEE.description"),features:[t("modeSelection.natoEE.feature1"),t("modeSelection.natoEE.feature2"),t("modeSelection.natoEE.feature3"),t("modeSelection.natoEE.feature4")],difficulty:t("modeSelection.natoEE.difficulty"),duration:t("modeSelection.natoEE.duration"),enabled:!0},{id:"procedural-infinite",mode:J.PROCEDURAL,icon:e.jsx(He,{size:48}),title:t("modeSelection.infinite.title"),subtitle:t("modeSelection.infinite.subtitle"),classification:t("modeSelection.classification"),description:t("modeSelection.infinite.description"),features:[t("modeSelection.infinite.feature1"),t("modeSelection.infinite.feature2"),t("modeSelection.infinite.feature3"),t("modeSelection.infinite.feature4")],difficulty:t("modeSelection.infinite.difficulty"),duration:t("modeSelection.infinite.duration"),enabled:!1}];return e.jsxs("div",{className:"screen-container mode-selection-screen",children:[e.jsxs("div",{className:"card mode-selection-card",children:[e.jsxs("div",{className:"mode-selection-header",children:[e.jsx(q,{className:"mode-selection-icon",size:40}),e.jsx("h1",{className:"mode-selection-title",children:t("modeSelection.title")}),e.jsx("p",{className:"mode-selection-subtitle",children:t("modeSelection.subtitle")})]}),e.jsx("div",{className:"mode-grid",children:n.map(a=>e.jsxs("div",{className:`mode-card ${a.enabled?"":"mode-card-disabled"}`,children:[e.jsx("div",{className:"mode-classification",children:a.classification}),e.jsxs("div",{className:"mode-card-header",children:[e.jsx("div",{className:"mode-icon-container",style:{color:a.enabled?"#22d3ee":"#6b7280"},children:a.enabled?a.icon:e.jsx(oe,{size:48})}),e.jsx("h2",{className:"mode-card-title",children:a.title}),e.jsx("p",{className:"mode-card-subtitle",children:a.subtitle})]}),e.jsx("p",{className:"mode-card-description",children:a.description}),e.jsx("div",{className:"mode-features",children:a.features.map((l,c)=>e.jsxs("div",{className:"mode-feature",children:[e.jsx("span",{className:"mode-feature-bullet",children:"â€¢"}),e.jsx("span",{className:"mode-feature-text",children:l})]},c))}),e.jsxs("div",{className:"mode-meta",children:[e.jsxs("span",{className:"mode-meta-item",children:[e.jsxs("strong",{children:[t("modeSelection.difficultyLabel"),":"]})," ",a.difficulty]}),e.jsxs("span",{className:"mode-meta-item",children:[e.jsxs("strong",{children:[t("modeSelection.durationLabel"),":"]})," ",a.duration]})]}),a.enabled?e.jsx("button",{onClick:()=>s(a.mode,a.id),className:"button primary-button full-width mode-select-button",children:t("modeSelection.deployButton")}):e.jsxs("div",{className:"mode-coming-soon",children:[e.jsx(oe,{size:16}),e.jsx("span",{children:t("modeSelection.comingSoon")})]})]},a.id))})]}),e.jsx(P,{})]})}function It(){const[s,t]=d.useState(I.START),[r,i]=d.useState(!1),[n,a]=d.useState(X),[l,c]=d.useState(J.SCENARIO),[m,u]=d.useState("nato-eastern-europe"),{t:o,loading:f}=st(),h=Qe(),{userInteracted:b,setUserInteracted:E}=tt(h.meter,s,r);d.useEffect(()=>{try{const N=localStorage.getItem("narrative-front-settings");if(N){const M=JSON.parse(N);M.isMuted!==void 0&&i(M.isMuted),M.language&&a(M.language)}}catch(N){console.error("Failed to load settings:",N)}},[]),d.useEffect(()=>{try{const N={isMuted:r,language:n};localStorage.setItem("narrative-front-settings",JSON.stringify(N))}catch(N){console.error("Failed to save settings:",N)}},[r,n]);const S=()=>{b||E(!0),t(I.BRIEFING)},C=()=>{h.resetGameState(),c(J.SCENARIO),u("nato-eastern-europe"),t(I.MODE_SELECTION)},T=(N,M)=>{h.resetGameState(),c(N),u(M),t(I.GAME)},p=()=>{t(I.END)},A=()=>{h.resetGameState(),t(I.BRIEFING)},k=()=>{t(I.START)},O=N=>{h.updateMeter(N)},U=N=>{N<0?h.spendManpower(Math.abs(N)):h.addManpower(N)},G=()=>h.advanceRound(),g=(N,M,y)=>{h.recordScenario(N,M,y)},v=N=>{h.registerPreBunk(N)},w=()=>h.saveGame(),L=()=>{const N=h.loadGame();return N&&t(I.GAME),N};if(f)return e.jsx("div",{className:"screen-container",children:e.jsx("div",{className:"card",children:e.jsx("p",{children:"Loading..."})})});const Y=()=>{switch(s){case I.START:return e.jsx(at,{onStart:S,t:o});case I.BRIEFING:return e.jsx(nt,{onStart:C,t:o});case I.MODE_SELECTION:return e.jsx(At,{onSelectMode:T,t:o});case I.GAME:return e.jsx(bt,{round:h.round,meter:h.meter,manpower:h.manpower,preBunksUsed:h.preBunksUsed,gameMode:l,scenarioId:m,language:n,isMuted:r,setIsMuted:i,onMeterChange:O,onManpowerChange:U,onAdvanceRound:G,onRegisterPreBunk:v,onRecordScenario:g,onSaveGame:w,onLoadGame:L,onGameEnd:p,hasSavedGame:h.hasSavedGame(),t:o});case I.END:return e.jsx(Ct,{meter:h.meter,manpower:h.manpower,scenarioHistory:h.scenarioHistory,onPlayAgain:A,t:o});default:return e.jsx("div",{className:"screen-container",children:e.jsxs("div",{className:"card",children:[e.jsx("p",{children:"Error: Unknown screen state"}),e.jsx("button",{onClick:k,className:"button primary-button",children:"Return to Start"})]})})}};return e.jsx("div",{className:"app",children:Y()})}ee.createRoot(document.getElementById("root")).render(e.jsx(Te.StrictMode,{children:e.jsx(It,{})}));
